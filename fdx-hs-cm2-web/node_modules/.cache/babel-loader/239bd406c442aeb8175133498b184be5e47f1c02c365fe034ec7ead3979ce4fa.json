{"ast":null,"code":"import { useWebSocketStore } from '@/store/websocket.js';\nimport { defineComponent, ref, watch } from 'vue';\nexport default {\n  name: 'labelMenu',\n  data() {\n    return {\n      saved: false,\n      sensor_configl: {\n        \"cmd\": \"sensor_configl\",\n        \"arg\": \"get_all\",\n        \"data\": \"\"\n      },\n      messageReceived: null,\n      labels: {\n        device: '',\n        // User input for device\n        equipment: ['', '', '', ''],\n        // User input for equipment\n        location: ['',\n        // User input for location_0\n        '',\n        // User input for location_1\n        '',\n        // User input for location_2\n        '',\n        // User input for location_3\n        '',\n        // User input for location_4\n        '',\n        // User input for location_5\n        '' // User input for location_6\n        ],\n\n        position: ['',\n        // User input for phase_0\n        '',\n        // User input for phase_1\n        '',\n        // User input for phase_2\n        '',\n        // User input for neutral_3\n        '' // User input for ambient\n        ]\n      }\n    };\n  },\n\n  methods: {\n    sendMessage() {\n      const websocketStore = useWebSocketStore();\n      const message = {\n        \"cmd\": \"sensor_configl\",\n        \"arg\": \"get_all\",\n        \"data\": \"\"\n      }; // Replace with your message data\n      websocketStore.send(message);\n    },\n    save() {\n      const websocketStore = useWebSocketStore();\n      const message = {\n        cmd: 'label',\n        arg: \"set\",\n        data: this.labels\n      }; // Replace with your message data\n      websocketStore.send(message);\n      this.saved = true;\n    },\n    sendCMD(message) {\n      const websocketStore = useWebSocketStore();\n      //const message = { cmd: 'label',arg: \"set\", data: this.labels }; // Replace with your message data\n      websocketStore.send(message);\n      this.saved = true;\n    },\n    loadWhenConnected() {\n      const websocketStore = useWebSocketStore();\n      this.status = websocketStore.getStatus();\n      console.log(\"status: \" + this.status);\n      if (this.status == \"connected\") {\n        this.sendCMD(this.sensor_configl);\n        this.sendMessage();\n        clearInterval(this.timer);\n      }\n    },\n    deepEqual(obj1, obj2) {\n      if (obj1 === obj2) {\n        return true;\n      }\n      if (typeof obj1 !== 'object' || obj1 === null || typeof obj2 !== 'object' || obj2 === null) {\n        return false;\n      }\n      const keys1 = Object.keys(obj1);\n      const keys2 = Object.keys(obj2);\n      if (keys1.length !== keys2.length) {\n        return false;\n      }\n      for (const key of keys1) {\n        if (!keys2.includes(key) || !this.deepEqual(obj1[key], obj2[key])) {\n          return false;\n        }\n      }\n      return true;\n    }\n  },\n  created() {\n    this.timer = setInterval(this.loadWhenConnected, 1000);\n    const websocketStore = useWebSocketStore();\n    this.$watch(() => websocketStore.messageReceived, newMessage => {\n      // console.log(newMessage);\n      try {\n        if (this.saved) {\n          this.saved = false;\n          var tmp = this.labels;\n          if (this.deepEqual(tmp, newMessage)) {\n            this.labels = newMessage;\n            alert(\"saved OK\");\n          } else {\n            alert(\"saved Fail\");\n          }\n        } else {\n          this.labels = newMessage.data;\n        }\n      } catch (error) {\n        console.error(error);\n        // Expected output: ReferenceError: nonExistentFunction is not defined\n        // (Note: the exact output may be browser-dependent)\n      }\n    });\n  }\n};","map":{"version":3,"names":["useWebSocketStore","defineComponent","ref","watch","name","data","saved","sensor_configl","messageReceived","labels","device","equipment","location","position","methods","sendMessage","websocketStore","message","send","save","cmd","arg","sendCMD","loadWhenConnected","status","getStatus","console","log","clearInterval","timer","deepEqual","obj1","obj2","keys1","Object","keys","keys2","length","key","includes","created","setInterval","$watch","newMessage","tmp","alert","error"],"sources":["C:\\Users\\Jose\\Documents\\projects\\fdx-hs-newGen-embedded-web\\fdx-hs-newGen-embedded-web\\fdx-hs-cm2-web\\src\\views\\sensor_configView.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\" >\r\n\r\n\r\n   \r\n  </div>\r\n</template>\r\n\r\n\r\n\r\n<script>\r\nimport { useWebSocketStore } from '@/store/websocket.js';\r\nimport { defineComponent, ref, watch } from 'vue';\r\n\r\nexport default {\r\n  name: 'labelMenu',\r\n  data() {\r\n    return {\r\n      saved: false,\r\n      sensor_configl : { \"cmd\": \"sensor_configl\",\"arg\":\"get_all\",\"data\":\"\"},\r\n      messageReceived: null,\r\n      labels:{\r\n      device: '', // User input for device\r\n      equipment: ['', '', '', ''], // User input for equipment\r\n      location: [\r\n        '', // User input for location_0\r\n        '', // User input for location_1\r\n        '', // User input for location_2\r\n        '', // User input for location_3\r\n        '', // User input for location_4\r\n        '', // User input for location_5\r\n        '', // User input for location_6\r\n      ],\r\n      position: [\r\n        '', // User input for phase_0\r\n        '', // User input for phase_1\r\n        '', // User input for phase_2\r\n        '', // User input for neutral_3\r\n        '', // User input for ambient\r\n      ],\r\n    }\r\n    };\r\n  },\r\n  methods: {\r\n    sendMessage() {\r\n      const websocketStore = useWebSocketStore();\r\n        const message = { \"cmd\": \"sensor_configl\",\"arg\":\"get_all\",\"data\":\"\"} ; // Replace with your message data\r\n        websocketStore.send(message);\r\n\r\n      },\r\n    save() {\r\n      const websocketStore = useWebSocketStore();\r\n      const message = { cmd: 'label',arg: \"set\", data: this.labels }; // Replace with your message data\r\n      websocketStore.send(message);\r\n      this.saved=true;\r\n     \r\n    },\r\n    sendCMD(message) {\r\n      const websocketStore = useWebSocketStore();\r\n      //const message = { cmd: 'label',arg: \"set\", data: this.labels }; // Replace with your message data\r\n      websocketStore.send(message);\r\n      this.saved=true;\r\n     \r\n    },\r\n\r\n    loadWhenConnected(){\r\n\r\n    const websocketStore = useWebSocketStore();\r\n    this.status=websocketStore.getStatus();\r\n    console.log(\"status: \"+ this.status);\r\n\r\n    if(this.status==\"connected\"){\r\n      this.sendCMD(this.sensor_configl);\r\n\r\n\r\n\r\n\r\n      this.sendMessage();\r\n      clearInterval(this.timer)\r\n      }\r\n\r\n    },\r\n\r\n    deepEqual(obj1, obj2) {\r\n      if (obj1 === obj2) {\r\n        return true;\r\n      }\r\n\r\n      if (typeof obj1 !== 'object' || obj1 === null || typeof obj2 !== 'object' || obj2 === null) {\r\n        return false;\r\n      }\r\n\r\n      const keys1 = Object.keys(obj1);\r\n      const keys2 = Object.keys(obj2);\r\n\r\n      if (keys1.length !== keys2.length) {\r\n        return false;\r\n      }\r\n\r\n      for (const key of keys1) {\r\n        if (!keys2.includes(key) || !this.deepEqual(obj1[key], obj2[key])) {\r\n          return false;\r\n        }\r\n      }\r\n      return true;\r\n    },\r\n  },\r\n\r\n  created() {\r\n\r\n    this.timer = setInterval(this.loadWhenConnected, 1000)\r\n    const websocketStore = useWebSocketStore();\r\n\r\n    this.$watch(\r\n      () => websocketStore.messageReceived,\r\n      (newMessage) => {\r\n     // console.log(newMessage);\r\n      try{\r\n        if(this.saved){\r\n          this.saved=false;\r\n          var tmp=this.labels;\r\n          if(this.deepEqual(tmp,newMessage)){\r\n\r\n            this.labels=newMessage;\r\n            alert(\"saved OK\")\r\n\r\n\r\n          }else{\r\n          alert(\"saved Fail\")\r\n\r\n          }\r\n        }else{\r\n          this.labels=newMessage.data;\r\n\r\n        }\r\n      }\r\n     catch (error) {\r\n        console.error(error);\r\n        // Expected output: ReferenceError: nonExistentFunction is not defined\r\n        // (Note: the exact output may be browser-dependent)\r\n      }\r\n      }\r\n    );\r\n\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\ninput {\r\n  margin: 5px;\r\n}\r\n</style>"],"mappings":"AAWA,SAASA,iBAAgB,QAAS,sBAAsB;AACxD,SAASC,eAAe,EAAEC,GAAG,EAAEC,KAAI,QAAS,KAAK;AAEjD,eAAe;EACbC,IAAI,EAAE,WAAW;EACjBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,KAAK,EAAE,KAAK;MACZC,cAAa,EAAI;QAAE,KAAK,EAAE,gBAAgB;QAAC,KAAK,EAAC,SAAS;QAAC,MAAM,EAAC;MAAE,CAAC;MACrEC,eAAe,EAAE,IAAI;MACrBC,MAAM,EAAC;QACPC,MAAM,EAAE,EAAE;QAAE;QACZC,SAAS,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC;QAAE;QAC7BC,QAAQ,EAAE,CACR,EAAE;QAAE;QACJ,EAAE;QAAE;QACJ,EAAE;QAAE;QACJ,EAAE;QAAE;QACJ,EAAE;QAAE;QACJ,EAAE;QAAE;QACJ,EAAE,CAAE;QAAA,CACL;;QACDC,QAAQ,EAAE,CACR,EAAE;QAAE;QACJ,EAAE;QAAE;QACJ,EAAE;QAAE;QACJ,EAAE;QAAE;QACJ,EAAE,CAAE;QAAA;MAER;IACA,CAAC;EACH,CAAC;;EACDC,OAAO,EAAE;IACPC,WAAWA,CAAA,EAAG;MACZ,MAAMC,cAAa,GAAIhB,iBAAiB,CAAC,CAAC;MACxC,MAAMiB,OAAM,GAAI;QAAE,KAAK,EAAE,gBAAgB;QAAC,KAAK,EAAC,SAAS;QAAC,MAAM,EAAC;MAAE,EAAE,CAAE;MACvED,cAAc,CAACE,IAAI,CAACD,OAAO,CAAC;IAE9B,CAAC;IACHE,IAAIA,CAAA,EAAG;MACL,MAAMH,cAAa,GAAIhB,iBAAiB,CAAC,CAAC;MAC1C,MAAMiB,OAAM,GAAI;QAAEG,GAAG,EAAE,OAAO;QAACC,GAAG,EAAE,KAAK;QAAEhB,IAAI,EAAE,IAAI,CAACI;MAAO,CAAC,EAAE;MAChEO,cAAc,CAACE,IAAI,CAACD,OAAO,CAAC;MAC5B,IAAI,CAACX,KAAK,GAAC,IAAI;IAEjB,CAAC;IACDgB,OAAOA,CAACL,OAAO,EAAE;MACf,MAAMD,cAAa,GAAIhB,iBAAiB,CAAC,CAAC;MAC1C;MACAgB,cAAc,CAACE,IAAI,CAACD,OAAO,CAAC;MAC5B,IAAI,CAACX,KAAK,GAAC,IAAI;IAEjB,CAAC;IAEDiB,iBAAiBA,CAAA,EAAE;MAEnB,MAAMP,cAAa,GAAIhB,iBAAiB,CAAC,CAAC;MAC1C,IAAI,CAACwB,MAAM,GAACR,cAAc,CAACS,SAAS,CAAC,CAAC;MACtCC,OAAO,CAACC,GAAG,CAAC,UAAU,GAAE,IAAI,CAACH,MAAM,CAAC;MAEpC,IAAG,IAAI,CAACA,MAAM,IAAE,WAAW,EAAC;QAC1B,IAAI,CAACF,OAAO,CAAC,IAAI,CAACf,cAAc,CAAC;QAKjC,IAAI,CAACQ,WAAW,CAAC,CAAC;QAClBa,aAAa,CAAC,IAAI,CAACC,KAAK;MACxB;IAEF,CAAC;IAEDC,SAASA,CAACC,IAAI,EAAEC,IAAI,EAAE;MACpB,IAAID,IAAG,KAAMC,IAAI,EAAE;QACjB,OAAO,IAAI;MACb;MAEA,IAAI,OAAOD,IAAG,KAAM,QAAO,IAAKA,IAAG,KAAM,IAAG,IAAK,OAAOC,IAAG,KAAM,QAAO,IAAKA,IAAG,KAAM,IAAI,EAAE;QAC1F,OAAO,KAAK;MACd;MAEA,MAAMC,KAAI,GAAIC,MAAM,CAACC,IAAI,CAACJ,IAAI,CAAC;MAC/B,MAAMK,KAAI,GAAIF,MAAM,CAACC,IAAI,CAACH,IAAI,CAAC;MAE/B,IAAIC,KAAK,CAACI,MAAK,KAAMD,KAAK,CAACC,MAAM,EAAE;QACjC,OAAO,KAAK;MACd;MAEA,KAAK,MAAMC,GAAE,IAAKL,KAAK,EAAE;QACvB,IAAI,CAACG,KAAK,CAACG,QAAQ,CAACD,GAAG,KAAK,CAAC,IAAI,CAACR,SAAS,CAACC,IAAI,CAACO,GAAG,CAAC,EAAEN,IAAI,CAACM,GAAG,CAAC,CAAC,EAAE;UACjE,OAAO,KAAK;QACd;MACF;MACA,OAAO,IAAI;IACb;EACF,CAAC;EAEDE,OAAOA,CAAA,EAAG;IAER,IAAI,CAACX,KAAI,GAAIY,WAAW,CAAC,IAAI,CAAClB,iBAAiB,EAAE,IAAI;IACrD,MAAMP,cAAa,GAAIhB,iBAAiB,CAAC,CAAC;IAE1C,IAAI,CAAC0C,MAAM,CACT,MAAM1B,cAAc,CAACR,eAAe,EACnCmC,UAAU,IAAK;MACjB;MACC,IAAG;QACD,IAAG,IAAI,CAACrC,KAAK,EAAC;UACZ,IAAI,CAACA,KAAK,GAAC,KAAK;UAChB,IAAIsC,GAAG,GAAC,IAAI,CAACnC,MAAM;UACnB,IAAG,IAAI,CAACqB,SAAS,CAACc,GAAG,EAACD,UAAU,CAAC,EAAC;YAEhC,IAAI,CAAClC,MAAM,GAACkC,UAAU;YACtBE,KAAK,CAAC,UAAU;UAGlB,CAAC,MAAI;YACLA,KAAK,CAAC,YAAY;UAElB;QACF,CAAC,MAAI;UACH,IAAI,CAACpC,MAAM,GAACkC,UAAU,CAACtC,IAAI;QAE7B;MACF,EACD,OAAOyC,KAAK,EAAE;QACXpB,OAAO,CAACoB,KAAK,CAACA,KAAK,CAAC;QACpB;QACA;MACF;IACA,CACF,CAAC;EAEH;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}