{"ast":null,"code":"import { useWebSocketStore } from '@/store/websocket.js';\nimport { defineComponent, ref, watch } from 'vue';\nexport default {\n  name: 'CustomMenu',\n  data() {\n    return {\n      messageReceived: null,\n      customMessage: '',\n      error_msg: ''\n    };\n  },\n  computed: {\n    formattedMessage() {\n      if (this.messageReceived) {\n        try {\n          return JSON.stringify(JSON.parse(this.messageReceived), null, 2);\n        } catch (error) {\n          return this.messageReceived; // Display the original message if JSON parsing fails\n        }\n      }\n\n      return '';\n    }\n  },\n  methods: {\n    editMessage() {\n      const message = this.customMessage; // Use the customMessage property as the message\n      const parsedMessage = JSON.parse(message);\n      this.customMessage = parsedMessage;\n    },\n    sendMessage() {\n      try {\n        const message = this.customMessage; // Use the customMessage property as the message\n        const parsedMessage = JSON.parse(message);\n        const websocketStore = useWebSocketStore();\n        websocketStore.send(parsedMessage);\n        //this.customMessage = ''; // Clear the input after sending the message\n      } catch (error) {\n        console.error('Error parsing JSON:', error);\n        this.error_msg = error;\n        // Handle the error as needed (e.g., display an error message, etc.)\n      }\n    }\n  },\n\n  created() {\n    const websocketStore = useWebSocketStore();\n    const messageReceived = ref(null);\n    this.$watch(() => websocketStore.messageReceived, newMessage => {\n      this.messageReceived = newMessage;\n    });\n  }\n};","map":{"version":3,"names":["useWebSocketStore","defineComponent","ref","watch","name","data","messageReceived","customMessage","error_msg","computed","formattedMessage","JSON","stringify","parse","error","methods","editMessage","message","parsedMessage","sendMessage","websocketStore","send","console","created","$watch","newMessage"],"sources":["C:\\Users\\Jose\\Documents\\projects\\fdx-hs-newGen-embedded-web\\fdx-hs-newGen-embedded-web\\fdx-hs-cm2-web\\src\\views\\console_configView.vue"],"sourcesContent":["<template>\r\n  <span>\r\n    <div class=\"row\">\r\n      <p></p>\r\n      <div class=\"col-6\">\r\n        send:\r\n        <div>\r\n          <textarea v-model=\"customMessage\" placeholder=\"Enter custom message\" rows=\"40\" cols=\"80\"></textarea>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-6\">\r\n        Received:\r\n        <div v-if=\"messageReceived\" class=\"message-container\">\r\n          <pre> {{ formattedMessage }}</pre>\r\n          <button @click=\"editMessage\">Edit & send</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"row\">\r\n      <div class=\"col-6\">\r\n        <button @click=\"sendMessage\">Send Message</button>\r\n      </div>\r\n    </div>\r\n    <div class=\"row\">  \r\n      {{ error_msg }}\r\n    </div>\r\n  </span>\r\n</template>\r\n\r\n<script>\r\nimport { useWebSocketStore } from '@/store/websocket.js';\r\nimport { defineComponent, ref, watch } from 'vue';\r\n\r\nexport default {\r\n  name: 'CustomMenu',\r\n  data() {\r\n    return {\r\n      messageReceived: null,\r\n      customMessage: '',\r\n      error_msg: '',\r\n    };\r\n  },\r\n  computed: {\r\n    formattedMessage() {\r\n      if (this.messageReceived) {\r\n        try {\r\n          return JSON.stringify(JSON.parse(this.messageReceived), null, 2);\r\n        } catch (error) {\r\n          return this.messageReceived; // Display the original message if JSON parsing fails\r\n        }\r\n      }\r\n      return '';\r\n    },\r\n  },\r\n  methods: {\r\n\r\n    editMessage(){\r\n      const message = this.customMessage; // Use the customMessage property as the message\r\n      const parsedMessage = JSON.parse(message);\r\n\r\n      this.customMessage=parsedMessage;\r\n\r\n    },\r\n\r\n    sendMessage() {\r\n      try {\r\n        const message = this.customMessage; // Use the customMessage property as the message\r\n        const parsedMessage = JSON.parse(message);\r\n        const websocketStore = useWebSocketStore();\r\n        websocketStore.send(parsedMessage);\r\n        //this.customMessage = ''; // Clear the input after sending the message\r\n      } catch (error) {\r\n        console.error('Error parsing JSON:', error);\r\n        this.error_msg = error;\r\n        // Handle the error as needed (e.g., display an error message, etc.)\r\n      }\r\n    },\r\n  },\r\n  created() {\r\n    const websocketStore = useWebSocketStore();\r\n    const messageReceived = ref(null);\r\n\r\n    this.$watch(() => websocketStore.messageReceived, (newMessage) => {\r\n      this.messageReceived = newMessage;\r\n    });\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n  textarea {\r\n    width:  100%; /* Set the desired width */\r\n    height: 400px; /* Set the desired height */\r\n  }\r\n\r\n  .message-container {\r\n    max-height: 400px; /* Set the maximum height for the container */\r\n    overflow-y: auto; /* Add a scrollbar when content exceeds the height */\r\n    padding: 8px; /* Add some padding to the container */\r\n    border: 1px solid #ccc; /* Optional: Add a border for better visual separation */\r\n    font-family: monospace; /* Optional: Use a monospace font for better code formatting */\r\n  }\r\n</style>\r\n"],"mappings":"AA8BA,SAASA,iBAAgB,QAAS,sBAAsB;AACxD,SAASC,eAAe,EAAEC,GAAG,EAAEC,KAAI,QAAS,KAAK;AAEjD,eAAe;EACbC,IAAI,EAAE,YAAY;EAClBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,eAAe,EAAE,IAAI;MACrBC,aAAa,EAAE,EAAE;MACjBC,SAAS,EAAE;IACb,CAAC;EACH,CAAC;EACDC,QAAQ,EAAE;IACRC,gBAAgBA,CAAA,EAAG;MACjB,IAAI,IAAI,CAACJ,eAAe,EAAE;QACxB,IAAI;UACF,OAAOK,IAAI,CAACC,SAAS,CAACD,IAAI,CAACE,KAAK,CAAC,IAAI,CAACP,eAAe,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC;QAClE,EAAE,OAAOQ,KAAK,EAAE;UACd,OAAO,IAAI,CAACR,eAAe,EAAE;QAC/B;MACF;;MACA,OAAO,EAAE;IACX;EACF,CAAC;EACDS,OAAO,EAAE;IAEPC,WAAWA,CAAA,EAAE;MACX,MAAMC,OAAM,GAAI,IAAI,CAACV,aAAa,EAAE;MACpC,MAAMW,aAAY,GAAIP,IAAI,CAACE,KAAK,CAACI,OAAO,CAAC;MAEzC,IAAI,CAACV,aAAa,GAACW,aAAa;IAElC,CAAC;IAEDC,WAAWA,CAAA,EAAG;MACZ,IAAI;QACF,MAAMF,OAAM,GAAI,IAAI,CAACV,aAAa,EAAE;QACpC,MAAMW,aAAY,GAAIP,IAAI,CAACE,KAAK,CAACI,OAAO,CAAC;QACzC,MAAMG,cAAa,GAAIpB,iBAAiB,CAAC,CAAC;QAC1CoB,cAAc,CAACC,IAAI,CAACH,aAAa,CAAC;QAClC;MACF,EAAE,OAAOJ,KAAK,EAAE;QACdQ,OAAO,CAACR,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;QAC3C,IAAI,CAACN,SAAQ,GAAIM,KAAK;QACtB;MACF;IACF;EACF,CAAC;;EACDS,OAAOA,CAAA,EAAG;IACR,MAAMH,cAAa,GAAIpB,iBAAiB,CAAC,CAAC;IAC1C,MAAMM,eAAc,GAAIJ,GAAG,CAAC,IAAI,CAAC;IAEjC,IAAI,CAACsB,MAAM,CAAC,MAAMJ,cAAc,CAACd,eAAe,EAAGmB,UAAU,IAAK;MAChE,IAAI,CAACnB,eAAc,GAAImB,UAAU;IACnC,CAAC,CAAC;EACJ;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}