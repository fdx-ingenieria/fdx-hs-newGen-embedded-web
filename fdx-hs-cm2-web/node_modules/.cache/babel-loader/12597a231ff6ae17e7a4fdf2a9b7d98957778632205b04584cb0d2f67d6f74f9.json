{"ast":null,"code":"import { useWebSocketStore } from '@/store/websocket.js';\nimport { defineComponent, ref, watch } from 'vue';\nexport default {\n  name: 'labelMenu',\n  data() {\n    return {\n      saved: false,\n      messageReceived: null,\n      labels: {\n        device: '',\n        // User input for device\n        equipment: ['', '', '', ''],\n        // User input for equipment\n        location: ['',\n        // User input for location_0\n        '',\n        // User input for location_1\n        '',\n        // User input for location_2\n        '',\n        // User input for location_3\n        '',\n        // User input for location_4\n        '',\n        // User input for location_5\n        '' // User input for location_6\n        ],\n\n        position: ['',\n        // User input for phase_0\n        '',\n        // User input for phase_1\n        '',\n        // User input for phase_2\n        '',\n        // User input for neutral_3\n        '' // User input for ambient\n        ]\n      }\n    };\n  },\n\n  methods: {\n    sendMessage() {\n      const websocketStore = useWebSocketStore();\n      const message = {\n        cmd: 'label',\n        arg: \"get\",\n        data: \"\"\n      }; // Replace with your message data\n      websocketStore.send(message);\n    },\n    save() {\n      const websocketStore = useWebSocketStore();\n      const message = {\n        cmd: 'label',\n        arg: \"set\",\n        data: this.labels\n      }; // Replace with your message data\n      websocketStore.send(message);\n      this.saved = true;\n    },\n    loadWhenConnected() {\n      const websocketStore = useWebSocketStore();\n      this.status = websocketStore.getStatus();\n      console.log(\"status: \" + this.status);\n      if (this.status == \"connected\") {\n        this.sendMessage();\n        clearInterval(this.timer);\n      }\n    },\n    deepEqual(obj1, obj2) {\n      if (obj1 === obj2) {\n        return true;\n      }\n      if (typeof obj1 !== 'object' || obj1 === null || typeof obj2 !== 'object' || obj2 === null) {\n        return false;\n      }\n      const keys1 = Object.keys(obj1);\n      const keys2 = Object.keys(obj2);\n      if (keys1.length !== keys2.length) {\n        return false;\n      }\n      for (const key of keys1) {\n        if (!keys2.includes(key) || !this.deepEqual(obj1[key], obj2[key])) {\n          return false;\n        }\n      }\n      return true;\n    }\n  },\n  created() {\n    this.timer = setInterval(this.loadWhenConnected, 1000);\n    const websocketStore = useWebSocketStore();\n    this.$watch(() => websocketStore.messageReceived, newMessage => {\n      console.log(newMessage);\n      if (this.saved) {\n        this.saved = false;\n        var tmp = this.labels;\n        if (this.deepEqual(tmp, newMessage)) {\n          this.labels = newMessage;\n          alert(\"saved OK\");\n        } else {\n          alert(\"saved Fail\");\n        }\n      } else {\n        this.labels = newMessage.data;\n      }\n    });\n  }\n};","map":{"version":3,"names":["useWebSocketStore","defineComponent","ref","watch","name","data","saved","messageReceived","labels","device","equipment","location","position","methods","sendMessage","websocketStore","message","cmd","arg","send","save","loadWhenConnected","status","getStatus","console","log","clearInterval","timer","deepEqual","obj1","obj2","keys1","Object","keys","keys2","length","key","includes","created","setInterval","$watch","newMessage","tmp","alert"],"sources":["C:\\Users\\Jose\\Documents\\projects\\fdx-hs-newGen-embedded-web\\fdx-hs-newGen-embedded-web\\fdx-hs-cm2-web\\src\\views\\label_configView.vue"],"sourcesContent":["<template>\r\n  <div class=\"container mt-5\">\r\n    <div class=\"row mb-3\">\r\n      <label class=\"col-md-2 col-form-label\">Device:</label>\r\n      <div class=\"col-md-4\">\r\n        <input class=\"form-control\" v-model=\"labels.device\" maxlength=\"15\" />\r\n      </div>\r\n    </div>\r\n    <div class=\"row mb-3\">\r\n      <label class=\"col-md-2 col-form-label\">Equipment:</label>\r\n      <div class=\"col-md-8\">\r\n        <div class=\"row\">\r\n          <div class=\"col-md-2\">\r\n            <label class=\"col-form-label\">Equipment 0:</label>\r\n          </div>\r\n          <div class=\"col-md-4\">\r\n            <input class=\"form-control\" v-model=\"labels.equipment[0]\" maxlength=\"15\" />\r\n          </div>\r\n          <div class=\"col-md-2\">\r\n            <label class=\"col-form-label\">Equipment 1:</label>\r\n          </div>\r\n          <div class=\"col-md-4\">\r\n            <input class=\"form-control\" v-model=\"labels.equipment[1]\" maxlength=\"15\" />\r\n          </div>\r\n        </div>\r\n        <div class=\"row\">\r\n          <div class=\"col-md-2\">\r\n            <label class=\"col-form-label\">Equipment 2:</label>\r\n          </div>\r\n          <div class=\"col-md-4\">\r\n            <input class=\"form-control\" v-model=\"labels.equipment[2]\" maxlength=\"15\" />\r\n          </div>\r\n          <div class=\"col-md-2\">\r\n            <label class=\"col-form-label\">Equipment 3:</label>\r\n          </div>\r\n          <div class=\"col-md-4\">\r\n            <input class=\"form-control\" v-model=\"labels.equipment[3]\" maxlength=\"15\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"row mb-3\">\r\n      <label class=\"col-md-2 col-form-label\">Location:</label>\r\n      <div class=\"col-md-8\">\r\n        <div class=\"row\">\r\n          <div class=\"col-md-2\">\r\n            <label class=\"col-form-label\">Location 0:</label>\r\n          </div>\r\n          <div class=\"col-md-4\">\r\n            <input class=\"form-control\" v-model=\"labels.location[0]\" maxlength=\"15\" />\r\n\r\n          </div>\r\n          <div class=\"col-md-2\">\r\n            <label class=\"col-form-label\">Location 1:</label>\r\n          </div>\r\n          <div class=\"col-md-4\">\r\n            <input class=\"form-control\" v-model=\"labels.location[1]\" maxlength=\"15\" />\r\n          </div>\r\n          <div class=\"col-12\">     All sensor in \"Location 0\" represent a sensor out the system</div>\r\n\r\n        </div>\r\n        <div class=\"row\">\r\n          <div class=\"col-md-2\">\r\n            <label class=\"col-form-label\">Location 2:</label>\r\n          </div>\r\n          <div class=\"col-md-4\">\r\n            <input class=\"form-control\" v-model=\"labels.location[2]\" maxlength=\"15\" />\r\n          </div>\r\n          <div class=\"col-md-2\">\r\n            <label class=\"col-form-label\">Location 3:</label>\r\n          </div>\r\n          <div class=\"col-md-4\">\r\n            <input class=\"form-control\" v-model=\"labels.location[3]\" maxlength=\"15\" />\r\n          </div>\r\n        </div>\r\n        <div class=\"row\">\r\n          <div class=\"col-md-2\">\r\n            <label class=\"col-form-label\">Location 4:</label>\r\n          </div>\r\n          <div class=\"col-md-4\">\r\n            <input class=\"form-control\" v-model=\"labels.location[4]\" maxlength=\"15\" />\r\n          </div>\r\n          <div class=\"col-md-2\">\r\n            <label class=\"col-form-label\">Location 5:</label>\r\n          </div>\r\n          <div class=\"col-md-4\">\r\n            <input class=\"form-control\" v-model=\"labels.location[5]\" maxlength=\"15\" />\r\n          </div>\r\n        </div>\r\n        <div class=\"row\">\r\n          <div class=\"col-md-2\">\r\n            <label class=\"col-form-label\">Location 6:</label>\r\n          </div>\r\n          <div class=\"col-md-4\">\r\n            <input class=\"form-control\" v-model=\"labels.location[6]\" maxlength=\"15\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"row mb-3\">\r\n      <label class=\"col-md-2 col-form-label\">Position:</label>\r\n      <div class=\"col-md-8\">\r\n        <div class=\"row\">\r\n          <div class=\"col-md-2\">\r\n            <label class=\"col-form-label\">Position 0:</label>\r\n          </div>\r\n          <div class=\"col-md-4\">\r\n            <input class=\"form-control\" v-model=\"labels.position[0]\" maxlength=\"15\" />\r\n          </div>\r\n          <div class=\"col-md-2\">\r\n            <label class=\"col-form-label\">Position 1:</label>\r\n          </div>\r\n          <div class=\"col-md-4\">\r\n            <input class=\"form-control\" v-model=\"labels.position[1]\" maxlength=\"15\" />\r\n          </div>\r\n        </div>\r\n        <div class=\"row\">\r\n          <div class=\"col-md-2\">\r\n            <label class=\"col-form-label\">Position 2:</label>\r\n          </div>\r\n          <div class=\"col-md-4\">\r\n            <input class=\"form-control\" v-model=\"labels.position[2]\" maxlength=\"15\" />\r\n          </div>\r\n          <div class=\"col-md-2\">\r\n            <label class=\"col-form-label\">Position 3:</label>\r\n          </div>\r\n          <div class=\"col-md-4\">\r\n            <input class=\"form-control\" v-model=\"labels.position[3]\" maxlength=\"15\" />\r\n          </div>\r\n        </div>\r\n        <div class=\"row\">\r\n          <div class=\"col-md-2\">\r\n            <label class=\"col-form-label\">Position 4:</label>\r\n          </div>\r\n          <div class=\"col-md-4\">\r\n            <input class=\"form-control\" v-model=\"labels.position[4]\" maxlength=\"15\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"d-grid gap-2 d-md-flex justify-content-md-end\">\r\n      <button class=\"btn btn-primary me-md-2\" @click=\"save\">SAVE</button>\r\n\r\n    </div>\r\n\r\n   \r\n  </div>\r\n</template>\r\n\r\n\r\n\r\n<script>\r\nimport { useWebSocketStore } from '@/store/websocket.js';\r\nimport { defineComponent, ref, watch } from 'vue';\r\n\r\nexport default {\r\n  name: 'labelMenu',\r\n  data() {\r\n    return {\r\n      saved: false,\r\n      messageReceived: null,\r\n      labels:{\r\n      device: '', // User input for device\r\n      equipment: ['', '', '', ''], // User input for equipment\r\n      location: [\r\n        '', // User input for location_0\r\n        '', // User input for location_1\r\n        '', // User input for location_2\r\n        '', // User input for location_3\r\n        '', // User input for location_4\r\n        '', // User input for location_5\r\n        '', // User input for location_6\r\n      ],\r\n      position: [\r\n        '', // User input for phase_0\r\n        '', // User input for phase_1\r\n        '', // User input for phase_2\r\n        '', // User input for neutral_3\r\n        '', // User input for ambient\r\n      ],\r\n    }\r\n    };\r\n  },\r\n  methods: {\r\n    sendMessage() {\r\n      const websocketStore = useWebSocketStore();\r\n        const message = { cmd: 'label',arg: \"get\", data:\"\" }; // Replace with your message data\r\n        websocketStore.send(message);\r\n\r\n      },\r\n    save() {\r\n      const websocketStore = useWebSocketStore();\r\n      \r\n      const message = { cmd: 'label',arg: \"set\", data: this.labels }; // Replace with your message data\r\n      websocketStore.send(message);\r\n      this.saved=true;\r\n\r\n     \r\n    },\r\n\r\n    loadWhenConnected(){\r\n\r\n    const websocketStore = useWebSocketStore();\r\n    this.status=websocketStore.getStatus();\r\n    console.log(\"status: \"+ this.status);\r\n\r\n    if(this.status==\"connected\"){\r\n      this.sendMessage();\r\n      clearInterval(this.timer)\r\n    }\r\n    },\r\n    deepEqual(obj1, obj2) {\r\n      if (obj1 === obj2) {\r\n        return true;\r\n      }\r\n\r\n      if (typeof obj1 !== 'object' || obj1 === null || typeof obj2 !== 'object' || obj2 === null) {\r\n        return false;\r\n      }\r\n\r\n      const keys1 = Object.keys(obj1);\r\n      const keys2 = Object.keys(obj2);\r\n\r\n      if (keys1.length !== keys2.length) {\r\n        return false;\r\n      }\r\n\r\n      for (const key of keys1) {\r\n        if (!keys2.includes(key) || !this.deepEqual(obj1[key], obj2[key])) {\r\n          return false;\r\n        }\r\n      }\r\n\r\n      return true;\r\n    },\r\n\r\n\r\n  },\r\n\r\n  created() {\r\n\r\n\r\n    this.timer = setInterval(this.loadWhenConnected, 1000)\r\n    const websocketStore = useWebSocketStore();\r\n\r\n    this.$watch(\r\n      () => websocketStore.messageReceived,\r\n      (newMessage) => {\r\n      console.log(newMessage);\r\n       if(this.saved){\r\n        this.saved=false;\r\n        var tmp=this.labels;\r\n        if(this.deepEqual(tmp,newMessage)){\r\n\r\n          this.labels=newMessage;\r\n          alert(\"saved OK\")\r\n\r\n\r\n        }else{\r\n         alert(\"saved Fail\")\r\n\r\n        }\r\n      }else{\r\n        this.labels=newMessage.data;\r\n\r\n      }\r\n      }\r\n    );\r\n\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\ninput {\r\n  margin: 5px;\r\n}\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}